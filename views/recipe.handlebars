<!-- Search form -->
<form id="searchForm" action="/api/recipe" method="GET">
    <input id="searchInput" type="text" name="q" placeholder="Search for a recipe">
    <button id="searchButton" type="submit" value="Search">Search</button>
</form>

<!-- Creates cards for each recipe -->
<div id="recipeCards">
    {{#each recipes}}
        <div class="card">
            <img src="{{this.image}}" alt="{{this.label}}">
            <h2 class="card">{{this.label}}</h2>
            <a href="{{this.url}}" target="_blank">View Recipe</a>
            <p class="ingredients">Ingredients:</p>
            <ol class="ingredientLines">
                {{#each this.ingredientLines}}
                    <li>{{this}}</li>
                {{/each}}
            </ol>
            <button class="save-recipe" data-recipe-id="{{this.id}}">Save Recipe</button>
            <button class="save-ingredients" data-recipe-id="{{this.id}}">Save Ingredients</button>
        </div>
    {{/each}}

    <button id="nextPage" data-next-href="{{nextHref}}">Next Page</button>

    <script>
    document.getElementById('nextPage').addEventListener('click', async () => {
        // Get the nextHref from the button's data attribute
        const nextHref = document.getElementById('nextPage').dataset.nextHref;

        // Fetch the next page of recipes
        const response = await fetch(nextHref);
        const data = await response.json();

        // Update the page with the new recipes
        // You'll need to implement this function to match your application's needs
        updatePage(data);
    });
</script>
</div>

{{!-- <!-- JavaScript to handle form submission -->
<script>
    document.getElementById('searchForm').addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent default form submission
        const query = document.getElementById('searchInput').value;
        try {
            const response = await fetch(`/api/recipe?q=${query}`);
            if (response.ok) {
                const recipes = await response.json();
                // Render the recipes
                const recipeCards = document.getElementById('recipeCards');
                recipeCards.innerHTML = '';
                recipes.forEach(recipe => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.innerHTML = `
                        <img src="${recipe.image}" alt="${recipe.label}">
                        <h2>${recipe.label}</h2>
                        <a href="${recipe.url}" target="_blank">View Recipe</a>
                        <p>Ingredients: ${recipe.ingredientLines}</p>
                        <button class="save-recipe" data-recipe-id="${recipe.id}">Save Recipe</button>
                        <button class="save-ingredients" data-recipe-id="${recipe.id}">Save Ingredients</button>
                    `;
                    recipeCards.appendChild(card);
                });
            } else {
                console.error('Failed to fetch recipes');
            }
        } catch (error) {
            console.error('Error fetching recipes:', error);
        }
    });
</script> --}}
